<?php
class Twig_Error extends Exception { protected $lineno; protected $filename; protected $rawMessage; protected $previous; public function __construct($sp9f2d02, $sp1f599c = -1, $sp79b407 = null, Exception $sp02a259 = null) { if (PHP_VERSION_ID < 50300) { $this->previous = $sp02a259; parent::__construct(''); } else { parent::__construct('', 0, $sp02a259); } $this->lineno = $sp1f599c; $this->filename = $sp79b407; if (-1 === $this->lineno || null === $this->filename) { $this->guessTemplateInfo(); } $this->rawMessage = $sp9f2d02; $this->updateRepr(); } public function getRawMessage() { return $this->rawMessage; } public function getTemplateFile() { return $this->filename; } public function setTemplateFile($sp79b407) { $this->filename = $sp79b407; $this->updateRepr(); } public function getTemplateLine() { return $this->lineno; } public function setTemplateLine($sp1f599c) { $this->lineno = $sp1f599c; $this->updateRepr(); } public function guess() { $this->guessTemplateInfo(); $this->updateRepr(); } public function __call($sp810c92, $spc5cc06) { if ('getprevious' == strtolower($sp810c92)) { return $this->previous; } throw new BadMethodCallException(sprintf('Method "Twig_Error::%s()" does not exist.', $sp810c92)); } protected function updateRepr() { $this->message = $this->rawMessage; $spaf6e79 = false; if ('.' === substr($this->message, -1)) { $this->message = substr($this->message, 0, -1); $spaf6e79 = true; } if ($this->filename) { if (is_string($this->filename) || is_object($this->filename) && method_exists($this->filename, '__toString')) { $sp79b407 = sprintf('"%s"', $this->filename); } else { $sp79b407 = json_encode($this->filename); } $this->message .= sprintf(' in %s', $sp79b407); } if ($this->lineno && $this->lineno >= 0) { $this->message .= sprintf(' at line %d', $this->lineno); } if ($spaf6e79) { $this->message .= '.'; } } protected function guessTemplateInfo() { $spe32893 = null; $sp55aef3 = null; if (PHP_VERSION_ID >= 50306) { $sp0ead13 = debug_backtrace(DEBUG_BACKTRACE_IGNORE_ARGS | DEBUG_BACKTRACE_PROVIDE_OBJECT); } else { $sp0ead13 = debug_backtrace(); } foreach ($sp0ead13 as $spe409d7) { if (isset($spe409d7['object']) && $spe409d7['object'] instanceof Twig_Template && 'Twig_Template' !== get_class($spe409d7['object'])) { $sp64e041 = get_class($spe409d7['object']); $sp75b0ea = 0 === strpos($sp55aef3, $sp64e041); if (null === $this->filename || $this->filename == $spe409d7['object']->getTemplateName() && !$sp75b0ea) { $spe32893 = $spe409d7['object']; $sp55aef3 = get_class($spe409d7['object']); } } } if (null !== $spe32893 && null === $this->filename) { $this->filename = $spe32893->getTemplateName(); } if (null === $spe32893 || $this->lineno > -1) { return; } $sp693624 = new ReflectionObject($spe32893); $spc15032 = $sp693624->getFileName(); if (is_dir($spc15032)) { $spc15032 = ''; } $sp93b14f = array($spbcee8e = $this); while (($spbcee8e instanceof self || method_exists($spbcee8e, 'getPrevious')) && ($spbcee8e = $spbcee8e->getPrevious())) { $sp93b14f[] = $spbcee8e; } while ($spbcee8e = array_pop($sp93b14f)) { $spcf6df5 = $spbcee8e->getTrace(); array_unshift($spcf6df5, array('file' => $spbcee8e->getFile(), 'line' => $spbcee8e->getLine())); while ($spe409d7 = array_shift($spcf6df5)) { if (!isset($spe409d7['file']) || !isset($spe409d7['line']) || $spc15032 != $spe409d7['file']) { continue; } foreach ($spe32893->getDebugInfo() as $spf5174e => $spa4267d) { if ($spf5174e <= $spe409d7['line']) { $this->lineno = $spa4267d; return; } } } } } }