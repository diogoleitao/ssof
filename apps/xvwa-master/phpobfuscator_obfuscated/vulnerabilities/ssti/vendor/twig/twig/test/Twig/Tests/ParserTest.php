<?php
class Twig_Tests_ParserTest extends PHPUnit_Framework_TestCase { public function testSetMacroThrowsExceptionOnReservedMethods() { $sp284ef6 = $this->getParser(); $sp284ef6->setMacro('display', $this->getMock('Twig_Node_Macro', array(), array(), '', null)); } public function testUnknownTag() { $sp8ec2ac = new Twig_TokenStream(array(new Twig_Token(Twig_Token::BLOCK_START_TYPE, '', 1), new Twig_Token(Twig_Token::NAME_TYPE, 'foo', 1), new Twig_Token(Twig_Token::BLOCK_END_TYPE, '', 1), new Twig_Token(Twig_Token::EOF_TYPE, '', 1))); $sp284ef6 = new Twig_Parser(new Twig_Environment()); $sp284ef6->parse($sp8ec2ac); } public function testFilterBodyNodes($sp693d57, $spc4a4e4) { $sp284ef6 = $this->getParser(); $this->assertEquals($spc4a4e4, $sp284ef6->filterBodyNodes($sp693d57)); } public function getFilterBodyNodesData() { return array(array(new Twig_Node(array(new Twig_Node_Text('   ', 1))), new Twig_Node(array())), array($sp693d57 = new Twig_Node(array(new Twig_Node_Set(false, new Twig_Node(), new Twig_Node(), 1))), $sp693d57), array($sp693d57 = new Twig_Node(array(new Twig_Node_Set(true, new Twig_Node(), new Twig_Node(array(new Twig_Node(array(new Twig_Node_Text('foo', 1))))), 1))), $sp693d57)); } public function testFilterBodyNodesThrowsException($sp693d57) { $sp284ef6 = $this->getParser(); $sp284ef6->filterBodyNodes($sp693d57); } public function getFilterBodyNodesDataThrowsException() { return array(array(new Twig_Node_Text('foo', 1)), array(new Twig_Node(array(new Twig_Node(array(new Twig_Node_Text('foo', 1))))))); } public function testFilterBodyNodesWithBOM() { $sp284ef6 = $this->getParser(); $sp284ef6->filterBodyNodes(new Twig_Node_Text(chr(239) . chr(187) . chr(191), 1)); } public function testParseIsReentrant() { $speae043 = new Twig_Environment(null, array('autoescape' => false, 'optimizations' => 0)); $speae043->addTokenParser(new TestTokenParser()); $sp284ef6 = new Twig_Parser($speae043); $sp284ef6->parse(new Twig_TokenStream(array(new Twig_Token(Twig_Token::BLOCK_START_TYPE, '', 1), new Twig_Token(Twig_Token::NAME_TYPE, 'test', 1), new Twig_Token(Twig_Token::BLOCK_END_TYPE, '', 1), new Twig_Token(Twig_Token::VAR_START_TYPE, '', 1), new Twig_Token(Twig_Token::NAME_TYPE, 'foo', 1), new Twig_Token(Twig_Token::VAR_END_TYPE, '', 1), new Twig_Token(Twig_Token::EOF_TYPE, '', 1)))); $this->assertNull($sp284ef6->getParent()); } public function testGetVarName() { $speae043 = new Twig_Environment(null, array('autoescape' => false, 'optimizations' => 0)); $speae043->parse($speae043->tokenize('{% from _self import foo %}

{% macro foo() %}
    {{ foo }}
{% endmacro %}')); } protected function getParser() { $sp284ef6 = new TestParser(new Twig_Environment()); $sp284ef6->setParent(new Twig_Node()); $sp284ef6->stream = $this->getMockBuilder('Twig_TokenStream')->disableOriginalConstructor()->getMock(); return $sp284ef6; } } class TestParser extends Twig_Parser { public $stream; public function filterBodyNodes(Twig_NodeInterface $spcefb62) { return parent::filterBodyNodes($spcefb62); } } class TestTokenParser extends Twig_TokenParser { public function parse(Twig_Token $sp650e38) { $this->parser->parse(new Twig_TokenStream(array(new Twig_Token(Twig_Token::BLOCK_START_TYPE, '', 1), new Twig_Token(Twig_Token::NAME_TYPE, 'extends', 1), new Twig_Token(Twig_Token::STRING_TYPE, 'base', 1), new Twig_Token(Twig_Token::BLOCK_END_TYPE, '', 1), new Twig_Token(Twig_Token::EOF_TYPE, '', 1)))); $this->parser->getStream()->expect(Twig_Token::BLOCK_END_TYPE); return new Twig_Node(array()); } public function getTag() { return 'test'; } }