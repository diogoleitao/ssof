<?php
abstract class Twig_Template implements Twig_TemplateInterface { protected static $cache = array(); protected $parent; protected $parents = array(); protected $env; protected $blocks; protected $traits; public function __construct(Twig_Environment $spf4b92b) { $this->env = $spf4b92b; $this->blocks = array(); $this->traits = array(); } public abstract function getTemplateName(); public function getEnvironment() { return $this->env; } public function getParent(array $spdacfa9) { if (null !== $this->parent) { return $this->parent; } try { $sped512c = $this->doGetParent($spdacfa9); if (false === $sped512c) { return false; } if ($sped512c instanceof self) { return $this->parents[$sped512c->getTemplateName()] = $sped512c; } if (!isset($this->parents[$sped512c])) { $this->parents[$sped512c] = $this->loadTemplate($sped512c); } } catch (Twig_Error_Loader $spbcee8e) { $spbcee8e->setTemplateFile(null); $spbcee8e->guess(); throw $spbcee8e; } return $this->parents[$sped512c]; } protected function doGetParent(array $spdacfa9) { return false; } public function isTraitable() { return true; } public function displayParentBlock($sp3eec35, array $spdacfa9, array $sp8696f5 = array()) { $sp3eec35 = (string) $sp3eec35; if (isset($this->traits[$sp3eec35])) { $this->traits[$sp3eec35][0]->displayBlock($sp3eec35, $spdacfa9, $sp8696f5, false); } elseif (false !== ($sped512c = $this->getParent($spdacfa9))) { $sped512c->displayBlock($sp3eec35, $spdacfa9, $sp8696f5, false); } else { throw new Twig_Error_Runtime(sprintf('The template has no parent and no traits defining the "%s" block', $sp3eec35), -1, $this->getTemplateName()); } } public function displayBlock($sp3eec35, array $spdacfa9, array $sp8696f5 = array(), $sp17871a = true) { $sp3eec35 = (string) $sp3eec35; if ($sp17871a && isset($sp8696f5[$sp3eec35])) { $spe32893 = $sp8696f5[$sp3eec35][0]; $sp8a4c10 = $sp8696f5[$sp3eec35][1]; } elseif (isset($this->blocks[$sp3eec35])) { $spe32893 = $this->blocks[$sp3eec35][0]; $sp8a4c10 = $this->blocks[$sp3eec35][1]; } else { $spe32893 = null; $sp8a4c10 = null; } if (null !== $spe32893) { try { $spe32893->{$sp8a4c10}($spdacfa9, $sp8696f5); } catch (Twig_Error $spbcee8e) { if (!$spbcee8e->getTemplateFile()) { $spbcee8e->setTemplateFile($spe32893->getTemplateName()); } if (false === $spbcee8e->getTemplateLine()) { $spbcee8e->setTemplateLine(-1); $spbcee8e->guess(); } throw $spbcee8e; } catch (Exception $spbcee8e) { throw new Twig_Error_Runtime(sprintf('An exception has been thrown during the rendering of a template ("%s").', $spbcee8e->getMessage()), -1, $spe32893->getTemplateName(), $spbcee8e); } } elseif (false !== ($sped512c = $this->getParent($spdacfa9))) { $sped512c->displayBlock($sp3eec35, $spdacfa9, array_merge($this->blocks, $sp8696f5), false); } } public function renderParentBlock($sp3eec35, array $spdacfa9, array $sp8696f5 = array()) { ob_start(); $this->displayParentBlock($sp3eec35, $spdacfa9, $sp8696f5); return ob_get_clean(); } public function renderBlock($sp3eec35, array $spdacfa9, array $sp8696f5 = array(), $sp17871a = true) { ob_start(); $this->displayBlock($sp3eec35, $spdacfa9, $sp8696f5, $sp17871a); return ob_get_clean(); } public function hasBlock($sp3eec35) { return isset($this->blocks[(string) $sp3eec35]); } public function getBlockNames() { return array_keys($this->blocks); } protected function loadTemplate($spe32893, $sp97c142 = null, $sp1a6fde = null, $sp0eb4bf = null) { try { if (is_array($spe32893)) { return $this->env->resolveTemplate($spe32893); } if ($spe32893 instanceof self) { return $spe32893; } return $this->env->loadTemplate($spe32893, $sp0eb4bf); } catch (Twig_Error $spbcee8e) { if (!$spbcee8e->getTemplateFile()) { $spbcee8e->setTemplateFile($sp97c142 ? $sp97c142 : $this->getTemplateName()); } if ($spbcee8e->getTemplateLine()) { throw $spbcee8e; } if (!$sp1a6fde) { $spbcee8e->guess(); } else { $spbcee8e->setTemplateLine($sp1a6fde); } throw $spbcee8e; } } public function getBlocks() { return $this->blocks; } public function display(array $spdacfa9, array $sp8696f5 = array()) { $this->displayWithErrorHandling($this->env->mergeGlobals($spdacfa9), array_merge($this->blocks, $sp8696f5)); } public function render(array $spdacfa9) { $sp93a375 = ob_get_level(); ob_start(); try { $this->display($spdacfa9); } catch (Exception $spbcee8e) { while (ob_get_level() > $sp93a375) { ob_end_clean(); } throw $spbcee8e; } return ob_get_clean(); } protected function displayWithErrorHandling(array $spdacfa9, array $sp8696f5 = array()) { try { $this->doDisplay($spdacfa9, $sp8696f5); } catch (Twig_Error $spbcee8e) { if (!$spbcee8e->getTemplateFile()) { $spbcee8e->setTemplateFile($this->getTemplateName()); } if (false === $spbcee8e->getTemplateLine()) { $spbcee8e->setTemplateLine(-1); $spbcee8e->guess(); } throw $spbcee8e; } catch (Exception $spbcee8e) { throw new Twig_Error_Runtime(sprintf('An exception has been thrown during the rendering of a template ("%s").', $spbcee8e->getMessage()), -1, $this->getTemplateName(), $spbcee8e); } } protected abstract function doDisplay(array $spdacfa9, array $sp8696f5 = array()); protected final function getContext($spdacfa9, $spb437e7, $spf0dacc = false) { if (!array_key_exists($spb437e7, $spdacfa9)) { if ($spf0dacc || !$this->env->isStrictVariables()) { return; } throw new Twig_Error_Runtime(sprintf('Variable "%s" does not exist', $spb437e7), -1, $this->getTemplateName()); } return $spdacfa9[$spb437e7]; } protected function getAttribute($sp941276, $spb437e7, array $spc5cc06 = array(), $sp32ff7e = self::ANY_CALL, $sp5b25e3 = false, $spf0dacc = false) { if (self::METHOD_CALL !== $sp32ff7e) { $spbae6bc = is_bool($spb437e7) || is_float($spb437e7) ? (int) $spb437e7 : $spb437e7; if (is_array($sp941276) && array_key_exists($spbae6bc, $sp941276) || $sp941276 instanceof ArrayAccess && isset($sp941276[$spbae6bc])) { if ($sp5b25e3) { return true; } return $sp941276[$spbae6bc]; } if (self::ARRAY_CALL === $sp32ff7e || !is_object($sp941276)) { if ($sp5b25e3) { return false; } if ($spf0dacc || !$this->env->isStrictVariables()) { return; } if ($sp941276 instanceof ArrayAccess) { $sp9f2d02 = sprintf('Key "%s" in object with ArrayAccess of class "%s" does not exist', $spbae6bc, get_class($sp941276)); } elseif (is_object($sp941276)) { $sp9f2d02 = sprintf('Impossible to access a key "%s" on an object of class "%s" that does not implement ArrayAccess interface', $spb437e7, get_class($sp941276)); } elseif (is_array($sp941276)) { if (empty($sp941276)) { $sp9f2d02 = sprintf('Key "%s" does not exist as the array is empty', $spbae6bc); } else { $sp9f2d02 = sprintf('Key "%s" for array with keys "%s" does not exist', $spbae6bc, implode(', ', array_keys($sp941276))); } } elseif (self::ARRAY_CALL === $sp32ff7e) { if (null === $sp941276) { $sp9f2d02 = sprintf('Impossible to access a key ("%s") on a null variable', $spb437e7); } else { $sp9f2d02 = sprintf('Impossible to access a key ("%s") on a %s variable ("%s")', $spb437e7, gettype($sp941276), $sp941276); } } elseif (null === $sp941276) { $sp9f2d02 = sprintf('Impossible to access an attribute ("%s") on a null variable', $spb437e7); } else { $sp9f2d02 = sprintf('Impossible to access an attribute ("%s") on a %s variable ("%s")', $spb437e7, gettype($sp941276), $sp941276); } throw new Twig_Error_Runtime($sp9f2d02, -1, $this->getTemplateName()); } } if (!is_object($sp941276)) { if ($sp5b25e3) { return false; } if ($spf0dacc || !$this->env->isStrictVariables()) { return; } if (null === $sp941276) { $sp9f2d02 = sprintf('Impossible to invoke a method ("%s") on a null variable', $spb437e7); } else { $sp9f2d02 = sprintf('Impossible to invoke a method ("%s") on a %s variable ("%s")', $spb437e7, gettype($sp941276), $sp941276); } throw new Twig_Error_Runtime($sp9f2d02, -1, $this->getTemplateName()); } if (self::METHOD_CALL !== $sp32ff7e) { if (isset($sp941276->{$spb437e7}) || array_key_exists((string) $spb437e7, $sp941276)) { if ($sp5b25e3) { return true; } if ($this->env->hasExtension('sandbox')) { $this->env->getExtension('sandbox')->checkPropertyAllowed($sp941276, $spb437e7); } return $sp941276->{$spb437e7}; } } $spbd0159 = get_class($sp941276); if (!isset(self::$cache[$spbd0159]['methods'])) { self::$cache[$spbd0159]['methods'] = array_change_key_case(array_flip(get_class_methods($sp941276))); } $sp430abd = false; $sp4a2169 = strtolower($spb437e7); if (isset(self::$cache[$spbd0159]['methods'][$sp4a2169])) { $sp810c92 = (string) $spb437e7; } elseif (isset(self::$cache[$spbd0159]['methods']['get' . $sp4a2169])) { $sp810c92 = 'get' . $spb437e7; } elseif (isset(self::$cache[$spbd0159]['methods']['is' . $sp4a2169])) { $sp810c92 = 'is' . $spb437e7; } elseif (isset(self::$cache[$spbd0159]['methods']['__call'])) { $sp810c92 = (string) $spb437e7; $sp430abd = true; } else { if ($sp5b25e3) { return false; } if ($spf0dacc || !$this->env->isStrictVariables()) { return; } throw new Twig_Error_Runtime(sprintf('Method "%s" for object "%s" does not exist', $spb437e7, get_class($sp941276)), -1, $this->getTemplateName()); } if ($sp5b25e3) { return true; } if ($this->env->hasExtension('sandbox')) { $this->env->getExtension('sandbox')->checkMethodAllowed($sp941276, $sp810c92); } try { $sp575a78 = call_user_func_array(array($sp941276, $sp810c92), $spc5cc06); } catch (BadMethodCallException $spbcee8e) { if ($sp430abd && ($spf0dacc || !$this->env->isStrictVariables())) { return; } throw $spbcee8e; } if ($sp941276 instanceof Twig_TemplateInterface) { return $sp575a78 === '' ? '' : new Twig_Markup($sp575a78, $this->env->getCharset()); } return $sp575a78; } }