<?php
class Twig_NodeTraverser { protected $env; protected $visitors; public function __construct(Twig_Environment $spf4b92b, array $sp6563f4 = array()) { $this->env = $spf4b92b; $this->visitors = array(); foreach ($sp6563f4 as $sp0bf47c) { $this->addVisitor($sp0bf47c); } } public function addVisitor(Twig_NodeVisitorInterface $sp0bf47c) { if (!isset($this->visitors[$sp0bf47c->getPriority()])) { $this->visitors[$sp0bf47c->getPriority()] = array(); } $this->visitors[$sp0bf47c->getPriority()][] = $sp0bf47c; } public function traverse(Twig_NodeInterface $spcefb62) { ksort($this->visitors); foreach ($this->visitors as $sp6563f4) { foreach ($sp6563f4 as $sp0bf47c) { $spcefb62 = $this->traverseForVisitor($sp0bf47c, $spcefb62); } } return $spcefb62; } protected function traverseForVisitor(Twig_NodeVisitorInterface $sp0bf47c, Twig_NodeInterface $spcefb62 = null) { if (null === $spcefb62) { return; } $spcefb62 = $sp0bf47c->enterNode($spcefb62, $this->env); foreach ($spcefb62 as $sp0fcc28 => $sp96b41e) { if (false !== ($sp96b41e = $this->traverseForVisitor($sp0bf47c, $sp96b41e))) { $spcefb62->setNode($sp0fcc28, $sp96b41e); } else { $spcefb62->removeNode($sp0fcc28); } } return $sp0bf47c->leaveNode($spcefb62, $this->env); } }