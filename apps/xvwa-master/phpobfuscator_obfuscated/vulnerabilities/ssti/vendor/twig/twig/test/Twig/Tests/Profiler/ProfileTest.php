<?php
class Twig_Tests_Profiler_ProfileTest extends PHPUnit_Framework_TestCase { public function testConstructor() { $sp6e7f73 = new Twig_Profiler_Profile('template', 'type', 'name'); $this->assertEquals('template', $sp6e7f73->getTemplate()); $this->assertEquals('type', $sp6e7f73->getType()); $this->assertEquals('name', $sp6e7f73->getName()); } public function testIsRoot() { $sp6e7f73 = new Twig_Profiler_Profile('template', Twig_Profiler_Profile::ROOT); $this->assertTrue($sp6e7f73->isRoot()); $sp6e7f73 = new Twig_Profiler_Profile('template', Twig_Profiler_Profile::TEMPLATE); $this->assertFalse($sp6e7f73->isRoot()); } public function testIsTemplate() { $sp6e7f73 = new Twig_Profiler_Profile('template', Twig_Profiler_Profile::TEMPLATE); $this->assertTrue($sp6e7f73->isTemplate()); $sp6e7f73 = new Twig_Profiler_Profile('template', Twig_Profiler_Profile::ROOT); $this->assertFalse($sp6e7f73->isTemplate()); } public function testIsBlock() { $sp6e7f73 = new Twig_Profiler_Profile('template', Twig_Profiler_Profile::BLOCK); $this->assertTrue($sp6e7f73->isBlock()); $sp6e7f73 = new Twig_Profiler_Profile('template', Twig_Profiler_Profile::ROOT); $this->assertFalse($sp6e7f73->isBlock()); } public function testIsMacro() { $sp6e7f73 = new Twig_Profiler_Profile('template', Twig_Profiler_Profile::MACRO); $this->assertTrue($sp6e7f73->isMacro()); $sp6e7f73 = new Twig_Profiler_Profile('template', Twig_Profiler_Profile::ROOT); $this->assertFalse($sp6e7f73->isMacro()); } public function testGetAddProfile() { $sp6e7f73 = new Twig_Profiler_Profile(); $sp6e7f73->addProfile($spda7027 = new Twig_Profiler_Profile()); $sp6e7f73->addProfile($sp607ff1 = new Twig_Profiler_Profile()); $this->assertSame(array($spda7027, $sp607ff1), $sp6e7f73->getProfiles()); $this->assertSame(array($spda7027, $sp607ff1), iterator_to_array($sp6e7f73)); } public function testGetDuration() { $sp6e7f73 = new Twig_Profiler_Profile(); usleep(1); $sp6e7f73->leave(); $this->assertTrue($sp6e7f73->getDuration() > 0, sprintf('Expected duration > 0, got: %f', $sp6e7f73->getDuration())); } public function testSerialize() { $sp6e7f73 = new Twig_Profiler_Profile('template', 'type', 'name'); $sp68116d = new Twig_Profiler_Profile('template1', 'type1', 'name1'); $sp6e7f73->addProfile($sp68116d); $sp6e7f73->leave(); $sp68116d->leave(); $sp55bcf9 = unserialize(serialize($sp6e7f73)); $sp94a54f = $sp6e7f73->getProfiles(); $this->assertCount(1, $sp94a54f); $spd818a1 = $sp94a54f[0]; $this->assertEquals($sp6e7f73->getTemplate(), $sp55bcf9->getTemplate()); $this->assertEquals($sp6e7f73->getType(), $sp55bcf9->getType()); $this->assertEquals($sp6e7f73->getName(), $sp55bcf9->getName()); $this->assertEquals($sp6e7f73->getDuration(), $sp55bcf9->getDuration()); $this->assertEquals($sp68116d->getTemplate(), $spd818a1->getTemplate()); $this->assertEquals($sp68116d->getType(), $spd818a1->getType()); $this->assertEquals($sp68116d->getName(), $spd818a1->getName()); } }