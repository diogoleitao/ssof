<?php
class Twig_Profiler_Dumper_Blackfire { public function dump(Twig_Profiler_Profile $sp6e7f73) { $sp1c9c90 = array(); $this->spfda320('main()', $sp6e7f73, $sp1c9c90); $this->spe42438('main()', $sp6e7f73, $sp1c9c90); $sp321dc3 = microtime(true); $sp79fd89 = "file-format: BlackfireProbe\ncost-dimensions: wt mu pmu\nrequest-start: {$sp321dc3}\n\n"; foreach ($sp1c9c90 as $sp3eec35 => $sp14b89a) { $sp79fd89 .= "{$sp3eec35}//{$sp14b89a['ct']} {$sp14b89a['wt']} {$sp14b89a['mu']} {$sp14b89a['pmu']}\n"; } return $sp79fd89; } private function spe42438($sped512c, Twig_Profiler_Profile $sp6e7f73, &$sp1c9c90) { foreach ($sp6e7f73 as $spbcfac7) { if ($spbcfac7->isTemplate()) { $sp3eec35 = $spbcfac7->getTemplate(); } else { $sp3eec35 = sprintf('%s::%s(%s)', $spbcfac7->getTemplate(), $spbcfac7->getType(), $spbcfac7->getName()); } $this->spfda320(sprintf('%s==>%s', $sped512c, $sp3eec35), $spbcfac7, $sp1c9c90); $this->spe42438($sp3eec35, $spbcfac7, $sp1c9c90); } } private function spfda320($spd7e674, Twig_Profiler_Profile $sp6e7f73, &$sp1c9c90) { if (isset($sp1c9c90[$spd7e674])) { $sp1c9c90[$spd7e674]['ct'] += 1; $sp1c9c90[$spd7e674]['wt'] += floor($sp6e7f73->getDuration() * 1000000); $sp1c9c90[$spd7e674]['mu'] += $sp6e7f73->getMemoryUsage(); $sp1c9c90[$spd7e674]['pmu'] += $sp6e7f73->getPeakMemoryUsage(); } else { $sp1c9c90[$spd7e674] = array('ct' => 1, 'wt' => floor($sp6e7f73->getDuration() * 1000000), 'mu' => $sp6e7f73->getMemoryUsage(), 'pmu' => $sp6e7f73->getPeakMemoryUsage()); } } }